import{f as q,o as r,c as p,n as E,g as S,w as g,h as C,r as M,m as Y,i as me,j as x,k as J,v as he,a as m,l as Z,q as ve,t as V,s as le,x as fe,y as T,z as B,b as f,d as D,F as $,A as N,B as se,C as be,D as ye,E as _e,G as ge,H as re,T as ze,I as xe}from"./entry.XgdC37cu.js";import{_ as ue}from"./nuxt-link.i7TletHD.js";import{u as ee,a as ke,c as X,r as w,b as Se,d as ae,o as $e}from"./rpc.VfwAze1K.js";const G=q({__name:"NIcon",props:{icon:{}},setup(e){return(t,a)=>(r(),p("div",{class:E(["n-icon",t.icon])},null,2))}}),Q=q({__name:"NButton",props:{to:{},icon:{},border:{type:Boolean,default:!0},disabled:{type:Boolean},type:{default:"button"}},setup(e){return(t,a)=>{const i=G;return r(),S(me(t.to?x(ue):"button"),Y({to:t.to},{...t.$attrs,...!t.to&&{type:t.type}},{class:[[{"n-button-base active:n-button-active focus-visible:n-focus-base hover:n-button-hover":t.border},{"n-icon-button":!t.$slots.default}],"n-button n-transition n-disabled:n-disabled"]}),{default:g(()=>[M(t.$slots,"icon",{},()=>[t.icon?(r(),S(i,{key:0,icon:t.icon,class:E({"n-button-icon":t.$slots.default})},null,8,["icon","class"])):C("",!0)]),M(t.$slots,"default")]),_:3},16,["to","class"])}}}),Pe={class:"n-text-input flex flex items-center border n-border-base rounded py-1 pl-1 pr-2 focus-within:n-focus-base focus-within:border-context n-bg-base"},de=q({__name:"NTextInput",props:{modelValue:{default:""},icon:{},placeholder:{},disabled:{type:Boolean},autofocus:{type:Boolean},readonly:{type:Boolean},type:{default:"text"}},setup(e,{emit:t}){const n=ee(e,"modelValue",t,{passive:!0});return(s,o)=>{const v=G;return r(),p("div",Pe,[M(s.$slots,"icon",{},()=>[s.icon?(r(),S(v,{key:0,icon:s.icon,class:"ml-0.3em mr-0.1em text-1.1em op50"},null,8,["icon"])):C("",!0)]),J(m("input",Y({"onUpdate:modelValue":o[0]||(o[0]=c=>Z(n)?n.value=c:null)},s.$props,{class:"ml-0.4em w-full flex-auto n-bg-base !outline-none"}),null,16),[[he,x(n)]])])}}}),Ce={flex:"~ gap4","items-center":""},ce=q({__name:"NNavbar",props:{search:{},noPadding:{type:Boolean}},emits:["update:search"],setup(e,{emit:t}){const a=t;function i(n){a("update:search",n.target.value)}return(n,s)=>{const o=de;return r(),p("div",{flex:"~ col gap2",border:"b base","flex-1":"","n-navbar-glass":"",class:E([{p4:!n.noPadding}])},[m("div",Ce,[M(n.$slots,"search",{},()=>[n.search!==void 0?(r(),S(o,{key:0,placeholder:"Search...",icon:"carbon-search",n:"primary","flex-auto":"",class:E({"px-5 py-2":!n.noPadding}),value:n.search,onInput:i},null,8,["class","value"])):C("",!0)]),M(n.$slots,"actions")]),M(n.$slots,"default")],2)}}}),Ve=["disabled"],we={key:0,value:"",disabled:"",hidden:""},pe=q({__name:"NSelect",props:{modelValue:{default:void 0},placeholder:{default:""},icon:{default:""},disabled:{type:Boolean,default:!1}},setup(e,{emit:t}){const n=ee(e,"modelValue",t,{passive:!0});return(s,o)=>{const v=G;return r(),p("div",{class:E(["n-select flex flex items-center border rounded px-2 py-1 focus-within:n-focus-base focus-within:border-context n-bg-base",s.disabled?"border-gray:10":"n-border-base"])},[M(s.$slots,"icon",{},()=>[s.icon?(r(),S(v,{key:0,icon:s.icon,class:"mr-0.4em text-1.1em op50"},null,8,["icon"])):C("",!0)]),J(m("select",{"onUpdate:modelValue":o[0]||(o[0]=c=>Z(n)?n.value=c:null),disabled:s.disabled,class:E(["w-full flex-auto n-bg-base !outline-none",s.disabled?"appearance-none":""])},[s.placeholder?(r(),p("option",we,V(s.placeholder),1)):C("",!0),M(s.$slots,"default")],10,Ve),[[ve,x(n)]])],2)}}});function Ne(){const e=ke();return t=>{e.copy(t)}}const Me={key:0,flex:"","items-center":""},Ue={op50:""},De={key:0},Ee=m("div",{"flex-auto":""},null,-1),Re={flex:"","gap-2":""},Be=["value"],qe=["value"],Te=m("option",{value:0}," show all ",-1),Oe=m("th",{"text-center":""}," Actions ",-1),Ie=["onDblclick"],je=["onUpdate:modelValue","disabled"],Ae={key:1},Le={flex:"","justify-center":"",gap2:"",class:"group"},Fe=["onUpdate:modelValue","placeholder"],Ke={key:1,placeholder:"ObjectId(_id)",disabled:""},He={flex:"~ justify-center gap2"},Ge={key:1,flex:"~ justify-center items-center","h-full":"","text-2xl":""},We=q({__name:"DatabaseDetail",props:{collection:{type:String,required:!0}},setup(e){const t=e,a=le({limit:20,page:1}),i=X(async()=>{var u;return await((u=w.value)==null?void 0:u.countDocuments(t.collection))}),n=X(async()=>{var u;return await((u=w.value)==null?void 0:u.listDocuments(t.collection,a))});fe(a,async()=>{var u;n.value=await((u=w.value)==null?void 0:u.listDocuments(t.collection,a))});const s=X(async()=>{var u;return await((u=w.value)==null?void 0:u.resourceSchema(t.collection))}),o=T(()=>n.value&&n.value.length>0?Object.keys(n.value[0]):s.value?Object.keys(s.value):[]),v=B(""),c=B(!1),b=B(),y=B(),R=T(()=>v.value?n.value.filter(u=>{for(const d of o.value)if(u[d].toString().toLowerCase().includes(v.value.toLowerCase()))return!0;return!1}):n.value);function A(){var d;if(c.value)return;if(c.value=!0,y.value={},s.value)for(const h of Object.keys(s.value))y.value[h]="";else for(const h of o.value)h!=="_id"&&(y.value[h]="");const u=(d=b.value)==null?void 0:d.parentElement;u==null||u.scrollTo(0,u.scrollHeight)}function F(u){c.value||(c.value=!0,y.value={...u})}async function L(u,d=!0){var U,I,l;const h=d?(U=w.value)==null?void 0:U.createDocument:(I=w.value)==null?void 0:I.updateDocument;if(!h)return;const P=await h(t.collection,u);if(!(P!=null&&P.error)){if(d){if(!n.value.length)return n.value=await((l=w.value)==null?void 0:l.listDocuments(t.collection,a)),O();n.value.push({_id:P.insertedId,...u})}else{const j=n.value.findIndex(_=>_._id===P.value._id);n.value[j]=u}O()}}function O(){c.value=!1,y.value=null}async function W(u){var h;(await((h=w.value)==null?void 0:h.deleteDocument(t.collection,u._id))).deletedCount!==0&&(n.value=n.value.filter(P=>P._id!==u._id))}const K=Ne();return(u,d)=>{var l,j,_,te;const h=Q,P=pe,U=ce,I=G;return r(),p("div",{ref_key:"dbContainer",ref:b,class:E({"h-full":!((l=x(n))!=null&&l.length)})},[f(U,{search:v.value,"onUpdate:search":d[2]||(d[2]=z=>v.value=z),sticky:"","top-0":"",px4:"",py2:"","backdrop-blur":"","z-10":""},{actions:g(()=>[f(h,{icon:"carbon:add",n:"green",onClick:A},{default:g(()=>[D(" Add Document ")]),_:1})]),default:g(()=>{var z;return[x(i)?(r(),p("div",Me,[m("div",Ue,[v.value?(r(),p("span",De,V(R.value.length)+" matched Â· ",1)):C("",!0),m("span",null,V((z=x(n))==null?void 0:z.length)+" of "+V(x(i))+" documents in total",1)]),Ee,m("div",Re,[a.limit!==0?(r(),S(P,{key:0,modelValue:a.page,"onUpdate:modelValue":d[0]||(d[0]=k=>a.page=k)},{default:g(()=>[(r(!0),p($,null,N(Math.ceil(x(i)/a.limit),k=>(r(),p("option",{key:k,value:k}," page: "+V(k),9,Be))),128))]),_:1},8,["modelValue"])):C("",!0),f(P,{modelValue:a.limit,"onUpdate:modelValue":d[1]||(d[1]=k=>a.limit=k)},{default:g(()=>[(r(),p($,null,N([1,2,3,4,5],k=>m("option",{key:k,value:k*10}," show: "+V(k*10),9,qe)),64)),Te]),_:1},8,["modelValue"])])])):C("",!0)]}),_:1},8,["search"]),(j=x(n))!=null&&j.length||y.value?(r(),p("table",{key:0,"w-full":"",mb10:"",class:E({"editing-mode":c.value})},[m("thead",null,[m("tr",null,[(r(!0),p($,null,N(o.value,z=>(r(),p("th",{key:z,"text-start":""},V(z),1))),128)),Oe])]),m("tbody",null,[(r(!0),p($,null,N(R.value,z=>(r(),p("tr",{key:z._id,class:E({isEditing:c.value&&y.value._id===z._id})},[(r(!0),p($,null,N(o.value,k=>(r(),p("td",{key:k,onDblclick:ne=>F(z)},[c.value&&y.value._id===z._id?J((r(),p("input",{key:0,"onUpdate:modelValue":ne=>y.value[k]=ne,disabled:k==="_id"},null,8,je)),[[se,y.value[k]]]):(r(),p("span",Ae,V(z[k]),1))],40,Ie))),128)),m("td",null,[m("div",Le,[c.value&&y.value._id===z._id?(r(),p($,{key:0},[f(h,{title:"Save",icon:"carbon-save",n:"blue",onClick:d[3]||(d[3]=k=>L(y.value,!1))}),f(h,{title:"Cancel",icon:"carbon-close",n:"red",onClick:O})],64)):(r(),p($,{key:1},[f(h,{title:"Edit",icon:"carbon-edit",n:"blue",onClick:k=>F(z)},null,8,["onClick"]),f(h,{title:"Delete",icon:"carbon-trash-can",n:"red",onClick:k=>W(z)},null,8,["onClick"]),f(h,{title:"Duplicate",icon:"carbon-document-multiple-02",n:"cyan",onClick:k=>L(z)},null,8,["onClick"]),f(h,{title:"Copy",n:"xs purple",absolute:"","right-4":"","opacity-0":"","group-hover":"opacity-100","transition-all":"",icon:"carbon-copy",onClick:k=>x(K)(JSON.stringify(z))},null,8,["onClick"])],64))])])],2))),128)),c.value&&!((_=y.value)!=null&&_._id)?(r(),p("tr",{key:0,class:E({isEditing:c.value&&!((te=y.value)!=null&&te._id)})},[(r(!0),p($,null,N(o.value,z=>(r(),p("td",{key:z},[z!=="_id"?J((r(),p("input",{key:0,"onUpdate:modelValue":k=>y.value[z]=k,placeholder:z},null,8,Fe)),[[se,y.value[z]]]):(r(),p("input",Ke))]))),128)),m("td",He,[f(h,{title:"Save",icon:"carbon-save",n:"green",onClick:d[4]||(d[4]=z=>L(y.value))}),f(h,{title:"Cancel",icon:"carbon-close",n:"red",onClick:O})])],2)):C("",!0)])],2)):(r(),p("div",Ge,[f(I,{icon:"carbon-document",mr1:""}),D(" No documents found ")]))],2)}}}),Je={name:"splitpanes",emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((e,t)=>(e[t.id]=t)&&e,{})}},methods:{updatePaneComponents(){this.panes.forEach(e=>{e.update&&e.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[e.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(e,t){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=t},onMouseMove(e){this.touch.mouseDown&&(e.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(e)),this.$emit("resize",this.panes.map(t=>({min:t.min,max:t.max,size:t.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(e,t){"ontouchstart"in window&&(e.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===t?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(e,t),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=t,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[t])},onSplitterDblClick(e,t){let a=0;this.panes=this.panes.map((i,n)=>(i.size=n===t?i.max:i.min,n!==t&&(a+=i.min),i)),this.panes[t].size-=a,this.$emit("pane-maximize",this.panes[t]),this.$emit("resized",this.panes.map(i=>({min:i.min,max:i.max,size:i.size})))},onPaneClick(e,t){this.$emit("pane-click",this.indexedPanes[t])},getCurrentMouseDrag(e){const t=this.container.getBoundingClientRect(),{clientX:a,clientY:i}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:a-t.left,y:i-t.top}},getCurrentDragPercentage(e){e=e[this.horizontal?"y":"x"];const t=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(e=t-e),e*100/t},calculatePanesSize(e){const t=this.touch.activeSplitter;let a={prevPanesSize:this.sumPrevPanesSize(t),nextPanesSize:this.sumNextPanesSize(t),prevReachedMinPanes:0,nextReachedMinPanes:0};const i=0+(this.pushOtherPanes?0:a.prevPanesSize),n=100-(this.pushOtherPanes?0:a.nextPanesSize),s=Math.max(Math.min(this.getCurrentDragPercentage(e),n),i);let o=[t,t+1],v=this.panes[o[0]]||null,c=this.panes[o[1]]||null;const b=v.max<100&&s>=v.max+a.prevPanesSize,y=c.max<100&&s<=100-(c.max+this.sumNextPanesSize(t+1));if(b||y){b?(v.size=v.max,c.size=Math.max(100-v.max-a.prevPanesSize-a.nextPanesSize,0)):(v.size=Math.max(100-c.max-a.prevPanesSize-this.sumNextPanesSize(t+1),0),c.size=c.max);return}if(this.pushOtherPanes){const R=this.doPushOtherPanes(a,s);if(!R)return;({sums:a,panesToResize:o}=R),v=this.panes[o[0]]||null,c=this.panes[o[1]]||null}v!==null&&(v.size=Math.min(Math.max(s-a.prevPanesSize-a.prevReachedMinPanes,v.min),v.max)),c!==null&&(c.size=Math.min(Math.max(100-s-a.nextPanesSize-a.nextReachedMinPanes,c.min),c.max))},doPushOtherPanes(e,t){const a=this.touch.activeSplitter,i=[a,a+1];return t<e.prevPanesSize+this.panes[i[0]].min&&(i[0]=this.findPrevExpandedPane(a).index,e.prevReachedMinPanes=0,i[0]<a&&this.panes.forEach((n,s)=>{s>i[0]&&s<=a&&(n.size=n.min,e.prevReachedMinPanes+=n.min)}),e.prevPanesSize=this.sumPrevPanesSize(i[0]),i[0]===void 0)?(e.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((n,s)=>{s>0&&s<=a&&(n.size=n.min,e.prevReachedMinPanes+=n.min)}),this.panes[i[1]].size=100-e.prevReachedMinPanes-this.panes[0].min-e.prevPanesSize-e.nextPanesSize,null):t>100-e.nextPanesSize-this.panes[i[1]].min&&(i[1]=this.findNextExpandedPane(a).index,e.nextReachedMinPanes=0,i[1]>a+1&&this.panes.forEach((n,s)=>{s>a&&s<i[1]&&(n.size=n.min,e.nextReachedMinPanes+=n.min)}),e.nextPanesSize=this.sumNextPanesSize(i[1]-1),i[1]===void 0)?(e.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((n,s)=>{s<this.panesCount-1&&s>=a+1&&(n.size=n.min,e.nextReachedMinPanes+=n.min)}),this.panes[i[0]].size=100-e.prevPanesSize-e.nextReachedMinPanes-this.panes[this.panesCount-1].min-e.nextPanesSize,null):{sums:e,panesToResize:i}},sumPrevPanesSize(e){return this.panes.reduce((t,a,i)=>t+(i<e?a.size:0),0)},sumNextPanesSize(e){return this.panes.reduce((t,a,i)=>t+(i>e+1?a.size:0),0)},findPrevExpandedPane(e){return[...this.panes].reverse().find(t=>t.index<e&&t.size>t.min)||{}},findNextExpandedPane(e){return this.panes.find(t=>t.index>e+1&&t.size>t.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(e=>{const t=e.classList.contains("splitpanes__pane"),a=e.classList.contains("splitpanes__splitter");!t&&!a&&(e.parentNode.removeChild(e),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))})},addSplitter(e,t,a=!1){const i=e-1,n=document.createElement("div");n.classList.add("splitpanes__splitter"),a||(n.onmousedown=s=>this.onMouseDown(s,i),typeof window<"u"&&"ontouchstart"in window&&(n.ontouchstart=s=>this.onMouseDown(s,i)),n.onclick=s=>this.onSplitterClick(s,i+1)),this.dblClickSplitter&&(n.ondblclick=s=>this.onSplitterDblClick(s,i+1)),t.parentNode.insertBefore(n,t)},removeSplitter(e){e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.parentNode.removeChild(e)},redoSplitters(){const e=Array.from(this.container.children);e.forEach(a=>{a.className.includes("splitpanes__splitter")&&this.removeSplitter(a)});let t=0;e.forEach(a=>{a.className.includes("splitpanes__pane")&&(!t&&this.firstSplitter?this.addSplitter(t,a,!0):t&&this.addSplitter(t,a),t++)})},requestUpdate({target:e,...t}){const a=this.indexedPanes[e._.uid];Object.entries(t).forEach(([i,n])=>a[i]=n)},onPaneAdd(e){let t=-1;Array.from(e.$el.parentNode.children).some(n=>(n.className.includes("splitpanes__pane")&&t++,n===e.$el));const a=parseFloat(e.minSize),i=parseFloat(e.maxSize);this.panes.splice(t,0,{id:e._.uid,index:t,min:isNaN(a)?0:a,max:isNaN(i)?100:i,size:e.size===null?null:parseFloat(e.size),givenSize:e.size,update:e.update}),this.panes.forEach((n,s)=>n.index=s),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[t]}),this.$emit("pane-add",{index:t,panes:this.panes.map(n=>({min:n.min,max:n.max,size:n.size}))})})},onPaneRemove(e){const t=this.panes.findIndex(i=>i.id===e._.uid),a=this.panes.splice(t,1)[0];this.panes.forEach((i,n)=>i.index=n),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:{...a,index:t}}),this.$emit("pane-remove",{removed:a,panes:this.panes.map(i=>({min:i.min,max:i.max,size:i.size}))})})},resetPaneSizes(e={}){!e.addedPane&&!e.removedPane?this.initialPanesSizing():this.panes.some(t=>t.givenSize!==null||t.min||t.max<100)?this.equalizeAfterAddOrRemove(e):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(t=>({min:t.min,max:t.max,size:t.size})))},equalize(){const e=100/this.panesCount;let t=0;const a=[],i=[];this.panes.forEach(n=>{n.size=Math.max(Math.min(e,n.max),n.min),t-=n.size,n.size>=n.max&&a.push(n.id),n.size<=n.min&&i.push(n.id)}),t>.1&&this.readjustSizes(t,a,i)},initialPanesSizing(){let e=100;const t=[],a=[];let i=0;this.panes.forEach(s=>{e-=s.size,s.size!==null&&i++,s.size>=s.max&&t.push(s.id),s.size<=s.min&&a.push(s.id)});let n=100;e>.1&&(this.panes.forEach(s=>{s.size===null&&(s.size=Math.max(Math.min(e/(this.panesCount-i),s.max),s.min)),n-=s.size}),n>.1&&this.readjustSizes(e,t,a))},equalizeAfterAddOrRemove({addedPane:e,removedPane:t}={}){let a=100/this.panesCount,i=0;const n=[],s=[];e&&e.givenSize!==null&&(a=(100-e.givenSize)/(this.panesCount-1)),this.panes.forEach(o=>{i-=o.size,o.size>=o.max&&n.push(o.id),o.size<=o.min&&s.push(o.id)}),!(Math.abs(i)<.1)&&(this.panes.forEach(o=>{e&&e.givenSize!==null&&e.id===o.id||(o.size=Math.max(Math.min(a,o.max),o.min)),i-=o.size,o.size>=o.max&&n.push(o.id),o.size<=o.min&&s.push(o.id)}),i>.1&&this.readjustSizes(i,n,s))},readjustSizes(e,t,a){let i;e>0?i=e/(this.panesCount-t.length):i=e/(this.panesCount-a.length),this.panes.forEach((n,s)=>{if(e>0&&!t.includes(n.id)){const o=Math.max(Math.min(n.size+i,n.max),n.min),v=o-n.size;e-=v,n.size=o}else if(!a.includes(n.id)){const o=Math.max(Math.min(n.size+i,n.max),n.min),v=o-n.size;e-=v,n.size=o}n.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[n.id].size}%`})}),Math.abs(e)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(e){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((t,a)=>{t.ondblclick=e?i=>this.onSplitterDblClick(i,a):void 0})}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(){return be("div",{ref:"container",class:["splitpanes",`splitpanes--${this.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())}},Xe=(e,t)=>{const a=e.__vccOpts||e;for(const[i,n]of t)a[i]=n;return a},Ye={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(e){this.style=e}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(e){this.requestUpdate({target:this,size:e})},minSizeNumber(e){this.requestUpdate({target:this,min:e})},maxSizeNumber(e){this.requestUpdate({target:this,max:e})}}};function Qe(e,t,a,i,n,s){return r(),p("div",{class:"splitpanes__pane",onClick:t[0]||(t[0]=o=>s.onPaneClick(o,e._.uid)),style:ye(e.style)},[M(e.$slots,"default")],4)}const ie=Xe(Ye,[["render",Qe]]),oe=30,Ze=q({__name:"NSplitPane",props:{storageKey:{},stateKey:{default:"nuxt-devtools-panels-state"},leftSize:{},minSize:{},horizontal:{type:Boolean}},setup(e){const t=e,a=Se(t.stateKey,{},{listenToStorageChanges:!1}),i=t.storageKey,n=i?T({get:()=>a.value[i]||t.leftSize||oe,set:s=>{a.value[i]=s}}):B(t.leftSize||oe);return(s,o)=>(r(),S(x(Je),{horizontal:s.horizontal,"h-full":"","of-hidden":"",onResize:o[0]||(o[0]=v=>n.value=v[0].size)},{default:g(()=>[f(x(ie),{"h-full":"",class:"of-auto!",size:x(n),"min-size":s.$slots.right?s.minSize||10:100},{default:g(()=>[M(s.$slots,"left")]),_:3},8,["size","min-size"]),s.$slots.right?(r(),S(x(ie),{key:0,relative:"","h-full":"",class:"of-auto!","min-size":s.minSize||10},{default:g(()=>[M(s.$slots,"right")]),_:3},8,["min-size"])):C("",!0)]),_:3},8,["horizontal"]))}}),et=["checked","disabled"],tt=["disabled"],nt={class:"n-checkbox-box n-checked:n-checkbox-box-checked peer-active:n-active-base peer-focus-visible:n-focus-base n-transition"},st=q({__name:"NCheckbox",props:{modelValue:{type:[Boolean,null],default:!1},disabled:{type:Boolean,default:!1}},setup(e,{emit:t}){const n=ee(e,"modelValue",t,{passive:!0});return(s,o)=>{const v=G;return r(),p("label",{class:"n-checkbox hover:n-checkbox-hover select-none items-center n-disabled:n-disabled",checked:x(n)||null,disabled:s.disabled||null},[J(m("input",{"onUpdate:modelValue":o[0]||(o[0]=c=>Z(n)?n.value=c:null),type:"checkbox",class:"peer absolute op0",disabled:s.disabled,onKeypress:o[1]||(o[1]=ge(c=>n.value=!x(n),["enter"]))},null,40,tt),[[_e,x(n)]]),m("span",nt,[f(v,{class:"n-checkbox-icon scale-0 transform op0 n-transition n-checked:scale-100 n-checked:op100"})]),m("span",{class:E([x(n)?"":"op50","n-transition"])},[M(s.$slots,"default")],2)],8,et)}}}),at={relative:"","h-full":""},it={sticky:"","top-0":"",px8:"",py4:"","glass-effect":"","z-1":""},ot={mb2:"",flex:"","items-center":""},lt={"text-2xl":"","font-bold":"",mt1:""},rt={flex:"",gap4:"",mt2:"",ml2:""},ut={flex:"",gap2:""},dt=["value"],ct={flex:"",gap2:""},pt=["value"],mt={flex:"",gap2:""},ht=["value"],vt={flex:"",gap4:""},ft={key:0,px8:""},bt={grid:"~ cols-1","gap-2":"",my4:""},yt={grid:"~ cols-6","text-center":""},_t=m("div",null," Actions ",-1),gt=["value"],zt={flex:"","justify-center":"",gap2:""},xt=q({__name:"CreateResource",emits:["refresh"],setup(e,{emit:t}){const a=t,i=re(),n=B(!0),s=le({browse:{active:!0,type:"index"},read:{active:!0,type:"show",by:"_id"},edit:{active:!0,type:"put",by:"_id"},add:{active:!0,type:"create"},delete:{active:!0,type:"delete",by:"_id"}}),o=T({get(){return s.browse.active||s.read.active||s.edit.active||s.add.active||s.delete.active},set(u){s.browse.active=u,s.read.active=u,s.edit.active=u,s.add.active=u,s.delete.active=u}}),v=B(""),c=B([{name:"name",type:"string",required:!0,unique:!1,default:""},{name:"slug",type:"string",required:!0,unique:!0,default:""}]),b=T(()=>[{name:"_id",type:"ObjectId",required:!0,unique:!0,default:""},...c.value]),y=["name","type","required","unique","default"],R=["string","number","boolean","date","object","array","ObjectId"];function A(u){c.value.splice(u+1,0,{name:"",type:"string",required:!1,unique:!1,default:""})}function F(u){c.value.splice(u,1)}const L=T(()=>{const u=[];for(const[d,h]of Object.entries(s))h.active&&u.push({type:h.type,by:h==null?void 0:h.by});return u}),O=T(()=>c.value.map(u=>{for(const[d,h]of Object.entries(u))h||delete u[d];return u}));async function W(){var u;await((u=w.value)==null?void 0:u.generateResource({name:v.value,fields:n.value?O.value:void 0},L.value).then(()=>{a("refresh"),i.push(`/?table=${v.value}`)}))}const K=T({get(){return o.value?n.value=!0:n.value},set(u){if(n.value=u,!n.value)return o.value=!1;o.value=!0}});return(u,d)=>{const h=st,P=pe,U=de,I=Q;return r(),p("div",at,[m("div",it,[m("div",ot,[m("span",lt,[f(h,{modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=l=>o.value=l),n:"green"},{default:g(()=>[D(" BREAD | ")]),_:1},8,["modelValue"])]),m("span",rt,[f(h,{modelValue:s.browse.active,"onUpdate:modelValue":d[1]||(d[1]=l=>s.browse.active=l),n:"blue"},{default:g(()=>[D(" Browse ")]),_:1},8,["modelValue"]),m("div",ut,[f(h,{modelValue:s.read.active,"onUpdate:modelValue":d[2]||(d[2]=l=>s.read.active=l),n:"cyan"},{default:g(()=>[D(" Read ")]),_:1},8,["modelValue"]),s.read.active?(r(),S(P,{key:0,modelValue:s.read.by,"onUpdate:modelValue":d[3]||(d[3]=l=>s.read.by=l)},{default:g(()=>[(r(!0),p($,null,N(b.value,l=>(r(),p("option",{key:l.name,value:l.name},V(l.name),9,dt))),128))]),_:1},8,["modelValue"])):C("",!0)]),m("div",ct,[f(h,{modelValue:s.edit.active,"onUpdate:modelValue":d[4]||(d[4]=l=>s.edit.active=l),n:"purple"},{default:g(()=>[D(" Edit ")]),_:1},8,["modelValue"]),s.edit.active?(r(),S(P,{key:0,modelValue:s.edit.by,"onUpdate:modelValue":d[5]||(d[5]=l=>s.edit.by=l)},{default:g(()=>[(r(!0),p($,null,N(b.value,l=>(r(),p("option",{key:l.name,value:l.name},V(l.name),9,pt))),128))]),_:1},8,["modelValue"])):C("",!0)]),f(h,{modelValue:s.add.active,"onUpdate:modelValue":d[6]||(d[6]=l=>s.add.active=l),n:"green"},{default:g(()=>[D(" Add ")]),_:1},8,["modelValue"]),m("div",mt,[f(h,{modelValue:s.delete.active,"onUpdate:modelValue":d[7]||(d[7]=l=>s.delete.active=l),n:"red"},{default:g(()=>[D(" Delete ")]),_:1},8,["modelValue"]),s.delete.active?(r(),S(P,{key:0,modelValue:s.delete.by,"onUpdate:modelValue":d[8]||(d[8]=l=>s.delete.by=l)},{default:g(()=>[(r(!0),p($,null,N(b.value,l=>(r(),p("option",{key:l.name,value:l.name},V(l.name),9,ht))),128))]),_:1},8,["modelValue"])):C("",!0)])])]),m("div",vt,[f(U,{modelValue:v.value,"onUpdate:modelValue":d[9]||(d[9]=l=>v.value=l),"flex-auto":"",placeholder:"Collection name"},null,8,["modelValue"]),f(h,{modelValue:K.value,"onUpdate:modelValue":d[10]||(d[10]=l=>K.value=l),n:"green"},{default:g(()=>[D(" Generate Schema ")]),_:1},8,["modelValue"])])]),n.value?(r(),p("div",ft,[m("div",bt,[m("div",yt,[(r(),p($,null,N(y,l=>m("div",{key:l},V(l),1)),64)),_t]),(r(!0),p($,null,N(c.value,(l,j)=>(r(),p("div",{key:j,grid:"~ cols-6","items-center":"","text-center":"",gap4:""},[m("div",null,[f(U,{modelValue:l.name,"onUpdate:modelValue":_=>l.name=_},null,8,["modelValue","onUpdate:modelValue"])]),m("div",null,[f(P,{modelValue:l.type,"onUpdate:modelValue":_=>l.type=_},{default:g(()=>[(r(),p($,null,N(R,_=>m("option",{key:_,value:_},V(_),9,gt)),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),m("div",null,[f(h,{modelValue:l.required,"onUpdate:modelValue":_=>l.required=_,n:"green"},null,8,["modelValue","onUpdate:modelValue"])]),m("div",null,[f(h,{modelValue:l.unique,"onUpdate:modelValue":_=>l.unique=_,n:"cyan"},null,8,["modelValue","onUpdate:modelValue"])]),m("div",null,[l.type==="string"?(r(),S(U,{key:0,modelValue:l.default,"onUpdate:modelValue":_=>l.default=_,type:"string",n:"orange"},null,8,["modelValue","onUpdate:modelValue"])):l.type==="number"?(r(),S(U,{key:1,modelValue:l.default,"onUpdate:modelValue":_=>l.default=_,type:"number",n:"orange"},null,8,["modelValue","onUpdate:modelValue"])):l.type==="boolean"?(r(),S(h,{key:2,modelValue:l.default,"onUpdate:modelValue":_=>l.default=_,n:"orange"},null,8,["modelValue","onUpdate:modelValue"])):l.type==="date"?(r(),S(U,{key:3,modelValue:l.default,"onUpdate:modelValue":_=>l.default=_,type:"date",n:"orange"},null,8,["modelValue","onUpdate:modelValue"])):l.type==="ObjectId"?(r(),S(U,{key:4,placeholder:"no-default",disabled:"",n:"orange"})):(r(),S(U,{key:5,modelValue:l.default,"onUpdate:modelValue":_=>l.default=_,n:"orange"},null,8,["modelValue","onUpdate:modelValue"]))]),m("div",zt,[f(I,{icon:"carbon-add",n:"cyan",onClick:_=>A(j)},null,8,["onClick"]),f(I,{icon:"carbon-trash-can",n:"red",onClick:_=>F(j)},null,8,["onClick"])])]))),128))])])):C("",!0),f(I,{"glass-effect":"",fixed:"","right-10":"","bottom-8":"",px8:"",py2:"",icon:"carbon-magic-wand-filled",n:"green",onClick:W},{default:g(()=>[D(" Create ")]),_:1})])}}}),kt=["border"],St={relative:"","h-full":"","w-full":"","of-auto":""},$t=q({__name:"NDrawer",props:{modelValue:{type:Boolean},top:{},left:{},autoClose:{type:Boolean},transition:{default:"right"}},emits:["close"],setup(e,{emit:t}){var c;const a=e,i=t,n=B(),{height:s}=ae(()=>a.top,void 0,{box:"border-box"}),o=typeof a.left=="string"&&a.left.startsWith("#")?(c=document.querySelector(a.left))==null?void 0:c.getBoundingClientRect().width:ae(()=>a.left,void 0,{box:"border-box"}).width;$e(n,()=>{a.modelValue&&a.autoClose&&i("close")},{ignore:["a","button","summary",'[role="dialog"]']});const v={right:{"enter-from-class":"transform translate-x-1/1","leave-to-class":"transform translate-x-1/1"},top:{"enter-from-class":"transform translate-y--1/1","leave-to-class":"transform translate-y--1/1"},bottom:{"enter-from-class":"transform translate-y-1/1","leave-to-class":"transform translate-y-1/1"}};return(b,y)=>{const R=Q;return r(),S(ze,Y(v[b.transition],{"enter-active-class":"duration-200 ease-in","enter-to-class":"opacity-100","leave-active-class":"duration-200 ease-out","leave-from-class":"opacity-100"}),{default:g(()=>[b.modelValue?(r(),p("div",Y({key:0,ref_key:"el",ref:n,border:`${b.transition==="right"?"l":b.transition==="bottom"?"t":"b"} base`,flex:"~ col gap-1",class:{"right-0":b.transition==="right"||b.transition==="bottom"},absolute:"","bottom-0":"","z-10":"","z-20":"","of-auto":"","text-sm":"","n-glass-effect":"",style:{top:b.transition==="bottom"?"auto":`${x(s)}px`,left:b.transition==="right"&&!x(o)?"auto":`${x(o)}px`}},b.$attrs),[f(R,{absolute:"","right-2":"","top-2":"","z-20":"","text-xl":"",icon:"carbon-close",border:!1,onClick:y[0]||(y[0]=A=>b.$emit("close"))}),m("div",St,[M(b.$slots,"default")])],16,kt)):C("",!0)]),_:3},16)}}}),H=xe("mongo:collection",()=>""),Pt={px4:""},Ct={flex:"","items-center":"",gap2:""},Vt={grid:"","gird-cols-1":"",my2:"",mx1:""},wt={flex:"~ items-center gap-2"},Nt={key:1,class:"n-panel-grids-center"},Mt={class:"n-card n-card-base",px6:"",py2:""},Ut={op75:"",flex:"","items-center":""},Bt=q({__name:"index",setup(e){const t=re(),a=B(!1),i=B(""),n=X(async()=>{var c;return await((c=w.value)==null?void 0:c.listCollections())}),s=T(()=>i.value?n.value.filter(c=>c.name.toLowerCase().includes(i.value.toLowerCase())):n.value);async function o(c){var b,y;await((b=w.value)==null?void 0:b.dropCollection(c.name)),n.value=await((y=w.value)==null?void 0:y.listCollections()),H.value===c.name&&(H.value="",t.push({name:"index"}))}async function v(){var c;n.value=await((c=w.value)==null?void 0:c.listCollections()),a.value=!1}return(c,b)=>{const y=Q,R=ce,A=G,F=ue,L=We,O=Ze,W=xt,K=$t;return r(),p($,null,[f(O,{"min-left":13,"max-left":20},{left:g(()=>{var u;return[m("div",Pt,[f(R,{search:i.value,"onUpdate:search":b[1]||(b[1]=d=>i.value=d),placeholder:`${((u=x(n))==null?void 0:u.length)??"-"} collection in total`,mt2:"","no-padding":""},{default:g(()=>[m("div",Ct,[f(y,{n:"blue","w-full":"","mb1.5":"",icon:"carbon-reset",title:"Refresh",onClick:v}),f(y,{n:"green","w-full":"","mb1.5":"",icon:"carbon-add",title:"Create Collection",onClick:b[0]||(b[0]=d=>a.value=!0)})])]),_:1},8,["search","placeholder"]),m("div",Vt,[(r(!0),p($,null,N(s.value,d=>(r(),S(F,{key:d.name,to:{name:"index",query:{table:d.name}},flex:"","items-center":"","justify-between":"",p2:"",my1:"","hover-bg-green":"","hover-bg-opacity-5":"","hover-text-green":"","rounded-lg":"",class:E({"bg-green bg-opacity-5 text-green":x(H)===d.name}),onClick:h=>H.value=d.name},{default:g(()=>[m("span",null,[f(A,{icon:"carbon-db2-database"}),D(" "+V(d.name),1)]),m("div",wt,[f(y,{border:!1,n:"red",icon:"carbon-trash-can",onClick:h=>o(d)},null,8,["onClick"])])]),_:2},1032,["to","class","onClick"]))),128))])])]}),right:g(()=>[x(H)?(r(),S(L,{key:0,collection:x(H)},null,8,["collection"])):(r(),p("div",Nt,[m("div",Mt,[m("span",Ut,[f(A,{icon:"carbon:db2-buffer-pool",mr2:""}),D(" Select a collection to start ")])])]))]),_:1}),f(K,{modelValue:a.value,"onUpdate:modelValue":b[2]||(b[2]=u=>a.value=u),style:{width:"calc(80.5%)"},"auto-close":"",onClose:b[3]||(b[3]=u=>a.value=!1),"z-20":""},{default:g(()=>[f(W,{onRefresh:v})]),_:1},8,["modelValue"])],64)}}});export{Bt as default};
